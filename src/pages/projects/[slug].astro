---
import Layout from '@layouts/Layout.astro';
import Tag from '@components/ui/Tag.astro';
import Slideshow from '@components/ui/Slideshow.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
	const projects = await getCollection('projects');
	return projects.map((project) => ({
		params: { slug: project.slug },
		props: { project },
	}));
}

const { project } = Astro.props;
---

<Layout title={`${project.data.title} | Project`}>
	<main class="mx-auto max-w-3xl">
		<header class="pt-4">
			<div class="flex flex-wrap items-center gap-3">
				<img src={`${project.data.banner}`} alt={`${project.data.title} banner`} class="h-full w-full rounded-lg object-cover" />
				<h1 class="text-3xl font-extrabold tracking-tight text-neutral-900 sm:text-4xl">{project.data.title}</h1>
				{project.data.inProgress && (
					<span class="rounded-full bg-amber-100 px-3 py-1 text-xs font-semibold text-amber-800 ring-1 ring-amber-200">
						In progress
					</span>
				)}
			</div>
			<p class="mt-3 text-sm leading-6 text-neutral-500">{project.data.description}</p>
		</header>

		<section class="mt-10">
			<h2 class="text-base font-bold text-neutral-900">What it is</h2>
			<p class="mt-2 text-sm leading-6 text-neutral-500">{project.data.what}</p>
		</section>

		<section class="mt-10">
			<h2 class="text-base font-bold text-neutral-900">Features</h2>
			<ul class="mt-2 list-disc space-y-2 pl-5 text-sm text-neutral-500">
				{project.data.features.map((feature: string) => <li>{feature}</li>)}
			</ul>
		</section>

		<section class="mt-10">
			<h2 class="text-base font-bold text-neutral-900">Planned</h2>
			<ul class="mt-2 list-disc space-y-2 pl-5 text-sm text-neutral-500">
				{project.data.planned.map((item: string) => <li>{item}</li>)}
			</ul>
		</section>

		<section class="mt-10">
			<h2 class="text-base font-bold text-neutral-900">Technologies</h2>
			<ul class="mt-2 list-disc space-y-2 pl-5 text-sm text-neutral-500">
				{project.data.technologies.map((tech: string) => <li>{tech}</li>)}
			</ul>
		</section>

		{project.data.screenshots && project.data.screenshots.length > 0 && (
			<section class="mt-10">
				<h2 class="text-base font-bold text-neutral-900">Screenshots</h2>
				<div class="mt-4">
					<Slideshow images={project.data.screenshots} />
				</div>
			</section>
		)}

		<footer class="mt-10">
			<div>
				{project.data.tags.map((tag: string) => (
					<Tag text={tag} />
				))}
			</div>
			<div class="mt-6 flex flex-wrap gap-3">
				<a href={project.data.github} target="_blank" rel="noopener" class="inline-flex items-center rounded-lg bg-neutral-900 px-4 py-2 text-sm font-semibold text-white hover:bg-neutral-800">
					View repository
				</a>
				<a href="/projects" class="inline-flex items-center rounded-lg bg-white px-4 py-2 text-sm font-semibold text-neutral-700 ring-1 ring-black/10 hover:bg-neutral-50">
					Back
				</a>
			</div>
		</footer>
	</main>
</Layout>
